# 0x00. 导读

yum install autossh

# 0x01. 简介

AutoSSH 是一种用以对 SSH 登录进行安全地自动化的软件！

autossh 工具是一个用来启动 ssh 服务并进行监控的命令行应用程序，可以在程序出现问题或者发生网络故障的时候，重启 ssh 服务。

# 0x02. 详解

- 在 autossh 1.2 的时候，其方法已经改变了：autossh 使用 ssh 来构造一个 ssh 重定向循环(本地到远程和远程到本地)，然后发送测试数据并获得返回结果。
- 在 autossh 1.3 增加了一个新的方法：可指定远程 echo 服务的端口用于返回测试数据发送结果。这个避免握手阶段以及所有远程机器端口的冲突问题，而老的 loop-of-forwardings 方法依然可用。

```bash
-M port	用于有问题时就会自动重连；服务器 echo 机制使用的端口
-D	本地机器动态的应用程序端口转发
-R	将远程主机(服务器)的某个端口转发到本地端指定机器的指定端口
-L	将本地机(客户机)的某个端口转发到远端指定机器的指定端口
-f	后台运行
-T	不占用 shell 终端
-n	配合 -f 参数使用
-N	不执行远程命令
-q	安静模式运行；忽略提示和错误
```

常用：
```bash
$ autossh -M 5678 -qfTnN -L 19090:localhost:9090 alfred@HWZJ1
-M 5678	负责通过 5678 端口监视连接状态，连接有问题时就会自动重连
-qfTnN	安静模式运行；后台运行；不占用 shell 终端；配合 -f 参数使用；不执行远程命令

将本地 19090 端口的请求发送到 HWZJ1 机器，然后再发回到 9090 端口。
```