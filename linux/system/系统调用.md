# 0x00. 导读

# 0x01. 简介

系统调用是一种程序进入内核执行任务的方式。程序利用系统调用进行一系列操作，例如 创建进程、处理网络、读写文件等等。

程序进入内核，其实就是一次特权级别切换，从 `Ring 3` 到 `Ring 0`。而触发特权级别切换有多种方式，最常见的方式是中断。

# 0x02. 系统调用的种类

三种。

# 2.1 传统系统调用

通过 软中断号 128(0x80) .

# 2.2 快速系统调用

比传统系统调用方式更快。
1. 在 32bit 系统上：使用 sysenter 和 sysexit
2. 在 64bit 系统上：使用 syscall 和 sysret

# 2.3 虚拟系统调用

让用户程序不进入内核，就可以发起特定的系统调用。
这就是 Linux 虚拟动态共享库 (VDSO) 技术。Linux VDSO 是一段内核代码，但映射到 用户空间，因而可以被用户空间程序直接调用。其设计思想就是部分系统调用无需用户程序 进入内核就可以调用，一个例子就是 gettimeofday 。

```bash
$ ldd `which bash`
        linux-vdso.so.1 =>  (0x00007ffca39ec000)
        libtinfo.so.5 => /lib64/libtinfo.so.5 (0x00007f8c2a089000)
        libdl.so.2 => /lib64/libdl.so.2 (0x00007f8c29e85000)
        libc.so.6 => /lib64/libc.so.6 (0x00007f8c29ab7000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f8c2a2b3000)
```